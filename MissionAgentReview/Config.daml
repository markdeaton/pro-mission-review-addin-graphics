<ArcGIS defaultAssembly="MissionAgentReview.dll" defaultNamespace="MissionAgentReview" xmlns="http://schemas.esri.com/DADF/Registry" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://schemas.esri.com/DADF/Registry file:///C:/Program%20Files/ArcGIS/Pro/bin/ArcGIS.Desktop.Framework.xsd">
  <AddInInfo id="{f12e418e-62f8-4094-b867-f8b3220ee73d}" version="1.0" desktopVersion="2.6.24783">
    <Name>MissionAgentReview</Name>
    <Description>ArcGIS Mission Post-Review Tools</Description>
    <Image>Images\AddinDesktop32.png</Image>
    <Author>mark4238</Author>
    <Company>Esri GeoXC</Company>
    <Date>8/3/2020 3:09:54 PM</Date>
    <Subject>Framework</Subject>
    <!-- Note subject can be one or more of these topics:
                    Content, Framework, Editing, Geodatabase, Geometry, Geoprocessing, Layouts, Map Authoring, Map Exploration -->
  </AddInInfo>
  <conditions>
    <!-- our custom condition -->
    <insertCondition id="MissionReviewTabEnabled_Condition" caption="Mission Review Tools Tab Enabled?">
      <!-- our condition is set true or false based on this underlying state -->
      <or>
        <state id="trackFeatureLayerSelected_state" />
        <state id="onlyAgentTrackGraphicsLyrsAreSelected_state"/>
      </or>
    </insertCondition>
    <insertCondition id="AgentTrackGeneratorListEnabled_Condition" caption="Agent Track Generator Enabled?">
        <state id="trackFeatureLayerSelected_state"/>
    </insertCondition>
    <insertCondition id="LOSToolsEnabled_Condition" caption="Line of Sight Tools Enabled?">
      <and>
        <state id="onlyAgentTrackGraphicsLyrsAreSelected_state"/>
        <and> <!-- Scene view active state taken from ConditionQuery community sample -->
          <state id="esri_mapping_mapPane" />
          <or>
            <state id="esri_mapping_mapViewingMode3DPerspectiveState" />
            <state id="esri_mapping_mapViewingMode3DGlobeState" />
          </or>
        </and>
      </and>
    </insertCondition>
    <insertCondition id="SequencingViewshedRunning_Condition" caption="Is a sequencing viewshed currently running?">
      <state id="sequencingViewshedRunning_state"/>
    </insertCondition>
    <insertCondition id="ViewshedNextEnabled_Condition" caption="Next viewshed button enabled?">
      <and>
        <not>
          <state id="sequencingViewshedRunning_state"/>
        </not>
        <state id="onlyAgentTrackGraphicsLyrsAreSelected_state"/>
        <and>
          <!-- Scene view active state taken from ConditionQuery community sample -->
          <state id="esri_mapping_mapPane" />
          <or>
            <state id="esri_mapping_mapViewingMode3DPerspectiveState" />
            <state id="esri_mapping_mapViewingMode3DGlobeState" />
          </or>
        </and>
      </and>
    </insertCondition>
  </conditions>
  <modules>
    <insertModule id="MissionAgentReview_Module" className="Module1" autoLoad="true" caption="Module1">
      <!-- uncomment to have the control hosted on a separate tab-->
      <tabGroups>
        <tabGroup caption="Mission" id="MissionReview_TabGroup">
          <color A="127" R="0" G="0" B="0" />
          <borderColor A="255" R="0" G="0" B="0" />
        </tabGroup>
      </tabGroups>
      <tabs>
        <tab id="MissionAgentReview_Tab" caption="Post-Mission Review" condition="MissionReviewTabEnabled_Condition" keytip="A" tabGroupID="MissionReview_TabGroup">
          <group refID="MissionReview_GenerateTracks_Group" />
          <group refID="MissionReview_LOS_Group"/>
        </tab>
      </tabs>
      <groups>
        <!-- Track line generation tools -->
        <group id="MissionReview_GenerateTracks_Group" caption="Find Agent Tracks" appearsOnAddInTab="false">
          <!-- host controls within groups -->
          <!--<button refID="MissionAgentReview_Button1" size="large" />-->
          <comboBox refID="MissionAgentReviewAgents_Combo" size="large"/>
        </group>
        <!-- Line of sight analysis tools -->
        <group id="MissionReview_LOS_Group" caption="Sightline Analysis" appearsOnAddInTab="false">
          <button refID="AgentTracksViewshed_Button" size="large"/>
          <button refID="AgentTracksViewshedNext_Button" size="large"/>
        </group>
      </groups>
      <controls>
        <!-- add your controls here -->
        <!-- Combo Box that holds the list of agents -->
        <comboBox id="MissionAgentReviewAgents_Combo" caption="Mission Agents:" className="AgentsCombo" 
                  condition="AgentTrackGeneratorListEnabled_Condition"
                  itemWidth="140" extendedCaption="Choose from this list of agents to examine an agent's path during the mission." isEditable="false" isReadOnly="true" resizable="true"
                  editHint="No agent selected">
          <tooltip heading="Agent track">Choose an agent to generate a mission track<disabledText>Select an agent track layer</disabledText>
          </tooltip>
        </comboBox>
        <!-- Viewshed button -->
        <button id="AgentTracksViewshed_Button" className="MissionAgentReview_Module:OnAgentTrackViewshedButtonClick" caption="Viewshed" loadOnClick="false" 
                condition="LOSToolsEnabled_Condition" checkedCondition="SequencingViewshedRunning_Condition"
                largeImage="Images\GenericButtonGreen32.png" smallImage="Images\GenericButtonGreen16.png">
          <tooltip>Generate a viewshed for selected agents' tracks<disabledText>Select one or more agent track line result layers</disabledText></tooltip>
        </button>
        <button id="AgentTracksViewshedNext_Button" className="MissionAgentReview_Module:OnAgentTrackViewshedNextButtonClick" caption="> Next Viewshed >" loadOnClick="false"
                condition="ViewshedNextEnabled_Condition" 
                largeImage="Images\GenericButtonGreen32.png" smallImage="Images\GenericButtonGreen16.png">
          <tooltip>
            Generate a viewshed for next sequence in selected agents' tracks<disabledText>Select one or more agent track line result layers</disabledText>
          </tooltip>
        </button>
      </controls>
    </insertModule>
  </modules>
</ArcGIS>